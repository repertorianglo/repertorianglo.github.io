---
import type { HTMLAttributes } from 'astro/types';
import HeaderLink from './HeaderLink.astro';

type Props = HTMLAttributes<'a'> & { noMarker?: boolean };

const { href, noMarker, class: className, ...props } = Astro.props;
const pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, '');
const subpath = pathname.match(/[^\/]+/g);
const isActive = href === pathname || href === '/' + (subpath?.[0] || '');
---

<div class="relative flex justify-center items-center">
    <HeaderLink href={href} class={className} {...props}>
        <slot />
    </HeaderLink>
    {!noMarker && (
        <div class={`w-full h-[4px] absolute ${isActive ? ' bg-[var(--primary)]' : ''}`} style="bottom: 0px"></div>
    )}
</div>
